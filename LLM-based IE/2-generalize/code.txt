from openai import OpenAI
client = OpenAI()

response = client.chat.completions.create(
  model="gpt-4o",
  messages=[
    {
      "role": "system",
      "content": [
        {
          "type": "text",
          "text": "\t**Your role**\n    You are a research assistant specializing in invasion biology or ecology. You also possess an expertise in semantic modeling. Your primary task is to read and analyze various semantic models which were generated as an information extraction objective over research papers.\n\n    The field of invasion biology is defined as follows: a research area focusing on the translocation, establishment, spread, impact, and management of species outside of their native ranges, where they are referred to as non-native or alien species.\n\n    The semantic models are centered on the following entities: species, location, habitat, and ecosystem.\n\t\n\tThe entities are defined as:\n    1. **Species**: This includes both specific, formally named species (e.g., *Asterias amurensis*) and broader categories of organisms relevant to the study (e.g., \"demersal fish\" or \"aquatic invertebrates\"). These may include plants, animals, fungi, or microbes that are translocated to new environments, where they establish, spread, and potentially cause ecological or economic impacts. The term may also encompass higher-level taxonomic groups or functional groups when specific species are not identified in the text. Note generic terms like \"invasive species\" is not considered a species name.\n    2. **Location**: The study site, which could range from a specific geographic feature (e.g., \"Port Phillip Bay, southern Australia\") to broader geopolitical regions (e.g., \"southern Australia\" or \"the Amazon rainforest\"). Locations may include natural features such as rivers, bays, or mountains, as well as administrative areas like cities, states, or countries.\n    3. **Ecosystem**: A system comprising interacting biological and abiotic components. Ecosystems often extend beyond specific locations (e.g., the savannah ecosystem spans geopolitical boundaries such as Kenya and Tanzania).\n    4. **Habitat**: A subcomponent of an ecosystem where a specific organism lives. For example, crocodiles inhabit freshwater habitats (e.g., rivers) within the broader savannah ecosystem.\n\t\n\t**Your task**\n\t1. Read the nine semantic models provided and come up with a generalized semantic model. The data structure to respond in is JSON.\n\t2. For the species the first part of the schema can look as follows:\n\t```\n\t      {\n          \"species\": [list of species mentioned],\n          \"habitat\": [list of habitats mentioned],\n          \"location\": [list of locations mentioned],\n          \"ecosystem\": [list of ecosystems mentioned]\n\t\t  }\n\t```\n\t3. Extend this semantic model with the relations by generalizing over the various relation structures modeled. Note the relation structure should not be actual relation name instances but a generic structure with properties that allow specifying a name and related entities.\n\t4. Note the provided input semantic models will have data instances. To come up with a generic model, you will ignore the data instances and propose the most generic model only with the properties. This semantic model will then resultingly be applied on papers to extract information from them.\n\t\n\t**Response Format:**\n\t1. Your response must always be in valid JSON format.\t\n\t\t  "
        }
      ]
    },
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "Come up with a generic semantic model given the following 10 schemas.\n\n**Schema 1**\n```json\n{\n    \"Species\": [\n        \"L. peploides subsp. montevidensis\"\n    ],\n    \"Location\": [\n        \"oceanic France\",\n        \"mediterranean France\",\n        \"mediterranean California\"\n    ],\n    \"Ecosystem\": [\n        \"mesocosms\"\n    ],\n    \"Habitat\": [],\n    \"Relationships\": [\n        {\n            \"terms\": [\n                \"oceanic France\",\n                \"mediterranean France\",\n                \"mediterranean California\",\n                \"L. peploides subsp. montevidensis\"\n            ],\n            \"name\": \"Seed Source Region\",\n            \"context\": \"Seed source region was a major factor influencing differences among invasive plants recruiting from sexual propagules of L. peploides subsp. montevidensis.\"\n        },\n        {\n            \"terms\": [\n                \"mediterranean California\",\n                \"oceanic France\",\n                \"L. peploides subsp. montevidensis\"\n            ],\n            \"name\": \"Trait Response Comparison\",\n            \"context\": \"Trait responses of young individual recruits from MCA and OFR, sourced from geographically distant and climatically distinct source regions, were the most different.\"\n        }\n    ]\n}\n```\n\n**Schema 2**\n ```json\n{\n  \"Species\": [\n    \"Thespesia populnea\",\n    \"Polyscias crassa\",\n    \"Syzygium wrightii\",\n    \"flying insects\",\n    \"sunbirds\",\n    \"Phelsuma geckos\",\n    \"ants\"\n  ],\n  \"Location\": [\n    \"Seychelles\"\n  ],\n  \"Ecosystem\": [],\n  \"Habitat\": [],\n  \"Relationships\": [\n    {\n      \"Related Entities\": [\"Thespesia populnea\", \"flying insects\"],\n      \"Relationship Name\": \"Most effective pollinators\",\n      \"Context\": \"Flying insects were the most effective pollinators of T. populnea.\"\n    },\n    {\n      \"Related Entities\": [\"Syzygium wrightii\", \"sunbirds\"],\n      \"Relationship Name\": \"Most effective pollinators\",\n      \"Context\": \"The other two plants were most effectively pollinated by vertebrates; i.e., sunbirds (nectar specialists) in S. wrightii...\"\n    },\n    {\n      \"Related Entities\": [\"Polyscias crassa\", \"Phelsuma geckos\"],\n      \"Relationship Name\": \"Most effective pollinators\",\n      \"Context\": \"Phelsuma geckos (nectar opportunists) in P. crassa...\"\n    },\n    {\n      \"Related Entities\": [\"Polyscias crassa\", \"ants\"],\n      \"Relationship Name\": \"Lower pollinator visitation due to disturbance\",\n      \"Context\": \"Ant presence was associated with lower pollinator visitation rate in P. crassa...\"\n    },\n    {\n      \"Related Entities\": [\"Syzygium wrightii\", \"ants\"],\n      \"Relationship Name\": \"Lower pollinator visitation due to disturbance\",\n      \"Context\": \"Ant presence was associated with lower pollinator visitation rate in ... S. wrightii.\"\n    }\n  ]\n}\n```\n\n**Schema 3**\n ```json\n{\n    \"species\": [\n        \"Dikerogammarus villosus\",\n        \"Gammarus pulex\",\n        \"Salix alba\"\n    ],\n    \"habitat\": [\n        \"freshwater\"\n    ],\n    \"location\": [\n        \"Europe\"\n    ],\n    \"ecosystem\": [\n        \"invaded systems\"\n    ],\n    \"relationships\": [\n        {\n            \"related_entities\": [\"Dikerogammarus villosus\", \"Europe\"],\n            \"relationship\": \"spreading\",\n            \"context\": \"The alien amphipod Dikerogammarus villosus is spreading rapidly through Europe where it has displaced native gammarids including Gammarus pulex.\"\n        },\n        {\n            \"related_entities\": [\"Dikerogammarus villosus\", \"Gammarus pulex\"],\n            \"relationship\": \"displacement\",\n            \"context\": \"The alien amphipod Dikerogammarus villosus is spreading rapidly through Europe where it has displaced native gammarids including Gammarus pulex.\"\n        },\n        {\n            \"related_entities\": [\"Dikerogammarus villosus\", \"freshwater\"],\n            \"relationship\": \"habitat\",\n            \"context\": \"Non-native crustaceans are of particular interest within fresh waters because of their important contributions to leaf-litter processing.\"\n        },\n        {\n            \"related_entities\": [\"Gammarus pulex\", \"freshwater\"],\n            \"relationship\": \"habitat\",\n            \"context\": \"Non-native crustaceans are of particular interest within fresh waters because of their important contributions to leaf-litter processing.\"\n        },\n        {\n            \"related_entities\": [\"Dikerogammarus villosus\", \"Salix alba\"],\n            \"relationship\": \"interaction\",\n            \"context\": \"The leaf (Salix alba) shredding efficiency, defined as the leaf mass consumed over the 4-day experiment per amphipod-day, was measured for D. villosus.\"\n        },\n        {\n            \"related_entities\": [\"Gammarus pulex\", \"Salix alba\"],\n            \"relationship\": \"interaction\",\n            \"context\": \"The leaf (Salix alba) shredding efficiency, defined as the leaf mass consumed over the 4-day experiment per amphipod-day, was measured for G. pulex.\"\n        }\n    ]\n}\n```\n\n**Schema 4**\n ```json\n{\n    \"Species\": [\n        \"alien species\",\n        \"invertebrates\"\n    ],\n    \"Location\": [\n        \"Italian coast\",\n        \"Mediterranean countries\"\n    ],\n    \"Ecosystem\": [\n        \"marine ecosystems\"\n    ],\n    \"Habitat\": [\n        \"marine habitats\",\n        \"benthic habitats\",\n        \"rocky circalittoral habitats\",\n        \"infralittoral habitats\"\n    ],\n    \"Relationships\": [\n        {\n            \"Related Entities\": [\n                \"alien species\",\n                \"marine habitats\"\n            ],\n            \"Relationship\": \"threat to\",\n            \"Context\": \"Spread of alien species (AS) is a serious threat to marine habitats\"\n        },\n        {\n            \"Related Entities\": [\n                \"alien species\",\n                \"benthic habitats\"\n            ],\n            \"Relationship\": \"abundance in\",\n            \"Context\": \"Alien species were found in all the habitats examined ... although they showed highest abundance in benthic habitats\"\n        },\n        {\n            \"Related Entities\": [\n                \"alien species\",\n                \"rocky circalittoral habitats\"\n            ],\n            \"Relationship\": \"high occurrence in\",\n            \"Context\": \"The number of observed AS was directly related to Rn and it was highest in rocky circalittoral\"\n        },\n        {\n            \"Related Entities\": [\n                \"alien species\",\n                \"infralittoral habitats\"\n            ],\n            \"Relationship\": \"high occurrence in\",\n            \"Context\": \"The number of observed AS was directly related to Rn and it was highest in ... infralittoral habitats\"\n        }\n    ]\n}\n```\n\n**Schema 5**\n ```json\n{\n    \"Species\": [\n        \"freshwater pearl mussel (Margaritifera margaritifera)\",\n        \"Atlantic salmon\",\n        \"brown trout\",\n        \"brook trout\",\n        \"salmonid fishes\"\n    ],\n    \"Location\": [\n        \"large river channels\",\n        \"small headwater tributaries\"\n    ],\n    \"Ecosystem\": [\n        \"freshwater ecosystems\"\n    ],\n    \"Habitat\": [\n        \"river channels\",\n        \"headwater tributaries\",\n        \"gills of captured salmonids\"\n    ],\n    \"Relationships\": [\n        {\n            \"Related Entities\": [\n                \"freshwater pearl mussel (Margaritifera margaritifera)\",\n                \"Atlantic salmon\"\n            ],\n            \"Relationship Name\": \"host-parasite\",\n            \"Context\": \"Atlantic salmon was clearly a better host for mussels in large river channels\"\n        },\n        {\n            \"Related Entities\": [\n                \"freshwater pearl mussel (Margaritifera margaritifera)\",\n                \"brown trout\"\n            ],\n            \"Relationship Name\": \"host-parasite\",\n            \"Context\": \"whereas in small headwater tributaries brown trout was the best, or the only suitable, host.\"\n        },\n        {\n            \"Related Entities\": [\n                \"large salmon rivers\",\n                \"hydropower production\"\n            ],\n            \"Relationship Name\": \"anthropogenic impact\",\n            \"Context\": \"a high proportion of large salmon rivers were dammed for hydropower production in the 1960s\"\n        },\n        {\n            \"Related Entities\": [\n                \"brook trout\",\n                \"Margaritifera margaritifera\"\n            ],\n            \"Relationship Name\": \"unsuitable host\",\n            \"Context\": \"an invasive salmonid, brook trout, was widely introduced to small tributaries above the dams in the past, but in this study was shown to be an unsuitable host for M. margaritifera.\"\n        },\n        {\n            \"Related Entities\": [\n                \"brook trout\",\n                \"brown trout\"\n            ],\n            \"Relationship Name\": \"competitive replacement\",\n            \"Context\": \"the tendency of brook trout to replace native brown trout\"\n        }\n    ]\n}\n```\n\n**Schema 6**\n ```json\n{\n    \"Species\": [\n        \"Centaurea stoebe\",\n        \"Cyphocleonus achates\",\n        \"Pseudoroegneria spicata\"\n    ],\n    \"Location\": [],\n    \"Ecosystem\": [],\n    \"Habitat\": [],\n    \"Relationships\": [\n        {\n            \"related_entities\": [\"Centaurea stoebe\", \"Cyphocleonus achates\"],\n            \"relationship_name\": \"herbivory\",\n            \"context\": \"Cyphocleonus achates herbivory reduced survival of adult Centaurea stoebe plants by 9% overall.\"\n        },\n        {\n            \"related_entities\": [\"Centaurea stoebe\", \"Pseudoroegneria spicata\"],\n            \"relationship_name\": \"competition\",\n            \"context\": \"Ce. stoebe strongly depressed P. spicata reproduction and recruitment.\"\n        }\n    ]\n}\n```\n\n**Schema 7**\n ```json\n{\n    \"Species\": [\n        \"exotic fish\",\n        \"native fish\",\n        \"exotic species\"\n    ],\n    \"Location\": [\n        \"Sepik River, Papua New Guinea\",\n        \"Sri Lanka\"\n    ],\n    \"Ecosystem\": [\n        \"freshwater ecosystems\"\n    ],\n    \"Habitat\": [\n        \"lentic habitats\"\n    ],\n    \"Relationships\": [\n        {\n            \"related_entities\": [\"exotic fish\", \"Sepik River, Papua New Guinea\"],\n            \"relationship_name\": \"introduced_species_location\",\n            \"context\": \"Two fish stocking projects (in 1987-93 and 1993-97) ... led to the introduction of a suite of exotic fish into the Sepik.\"\n        },\n        {\n            \"related_entities\": [\"exotic species\", \"native fish\"],\n            \"relationship_name\": \"species_interaction\",\n            \"context\": \"there is preliminary evidence both of increased human use of exotic fish as well as declines of some native species associated with the spread of exotics.\"\n        },\n        {\n            \"related_entities\": [\"exotic species\", \"Sri Lanka\", \"lentic habitats\"],\n            \"relationship_name\": \"exotic_species_habitat_location\",\n            \"context\": \"There are some situations, in lentic habitats in Sri Lanka, for example, where the establishment of exotics has increased fishery yields without apparent detriment to native biodiversity.\"\n        }\n    ]\n}\n```\n\n**Schema 8**\n ```json\n{\n    \"species\": [\n        \"Codium fragile ssp. tomentosoides\",\n        \"Grateloupia turuturu\",\n        \"Chondrus crispus\",\n        \"Fucus vesiculosus\",\n        \"Lacuna vincta\",\n        \"Neosiphonia harveyi\",\n        \"Ceramium virgatum\"\n    ],\n    \"location\": [\n        \"New England\"\n    ],\n    \"ecosystem\": [\n        \"rocky intertidal system\"\n    ],\n    \"habitat\": [\n        \"benthic\"\n    ],\n    \"relationships\": [\n        {\n            \"related_entities\": [\n                \"Codium fragile ssp. tomentosoides\",\n                \"Grateloupia turuturu\",\n                \"Chondrus crispus\",\n                \"Fucus vesiculosus\"\n            ],\n            \"relationship_name\": \"epiphyte hosts\",\n            \"context\": \"First, we compared the composition, abundance, richness, and diversity of epiphytes on 2 invasive macroalgal species, Codium fragile ssp. tomentosoides and Grateloupia turuturu, to 2 native macroalgal species, Chondrus crispus and Fucus vesiculosus.\"\n        },\n        {\n            \"related_entities\": [\n                \"Codium fragile ssp. tomentosoides\",\n                \"epiphytes\"\n            ],\n            \"relationship_name\": \"supports epiphytes year-round\",\n            \"context\": \"In contrast, epiphyte richness and diversity on C. fragile remained high throughout the year, suggesting that C. fragile plays an important role for supporting epiphytes during the cooler months.\"\n        },\n        {\n            \"related_entities\": [\n                \"Lacuna vincta\",\n                \"Neosiphonia harveyi\"\n            ],\n            \"relationship_name\": \"positive correlation\",\n            \"context\": \"The abundance of juvenile L. vincta was positively correlated with 1 of the 2 most common epiphyte species, Neosiphonia harveyi.\"\n        },\n        {\n            \"related_entities\": [\n                \"Lacuna vincta\",\n                \"Ceramium virgatum\"\n            ],\n            \"relationship_name\": \"consumption preference\",\n            \"context\": \"However, L. vincta showed a significant consumption preference for the other abundant epiphyte, Ceramium virgatum, in laboratory assays.\"\n        }\n    ]\n}\n```\n\n**Schema 9**\n ```json\n{\n    \"Species\": [\n        \"demersal fish\",\n        \"Asterias amurensis\"\n    ],\n    \"Location\": [\n        \"Port Phillip Bay\",\n        \"southern Australia\"\n    ],\n    \"Ecosystem\": [],\n    \"Habitat\": [\n        \"deep centre of the bay\",\n        \"intermediate depths\",\n        \"shallow fringes\",\n        \"coastal fringe\"\n    ],\n    \"Relationships\": [\n        {\n            \"related_entities\": [\"Asterias amurensis\", \"demersal fish\"],\n            \"relationship_name\": \"competition\",\n            \"context\": \"Declines in 3 species in the deep region were attributed to competition with A. amurensis. Each of these species exhibited high dietary overlap with A. amurensis and displayed sharp declines in biomass coinciding with the peak abundance of A. amurensis in 2000.\"\n        },\n        {\n            \"related_entities\": [\"drought\", \"demersal fish\"],\n            \"relationship_name\": \"impact on biomass decline\",\n            \"context\": \"During the drought, fish biomass declined by 69% in the deep centre of the bay, by 50% at intermediate depths, and showed no significant change around the shallow fringes.\"\n        },\n        {\n            \"related_entities\": [\"drought\", \"Port Phillip Bay\"],\n            \"relationship_name\": \"ecological disturbance\",\n            \"context\": \"Port Phillip Bay in southern Australia experienced 2 major ecological disturbances: a prolonged drought from 1997 to 2010\"\n        },\n        {\n            \"related_entities\": [\"Asterias amurensis\", \"Port Phillip Bay\"],\n            \"relationship_name\": \"introduction\",\n            \"context\": \"Port Phillip Bay in southern Australia experienced...the introduction of the invasive starfish, Asterias amurensis.\"\n        }\n    ]\n}\n```\n"
        }
      ]
    },
    {
      "role": "assistant",
      "content": [
        {
          "type": "text",
          "text": "```json\n{\n  \"species\": [\n    {\n      \"name\": \"species_name\",\n      \"properties\": {\n        \"type\": \"specific/broad\",\n        \"distribution_status\": \"native/non-native\"\n      }\n    }\n  ],\n  \"location\": [\n    {\n      \"name\": \"location_name\",\n      \"properties\": {\n        \"type\": \"natural/administrative\",\n        \"coordinates\": {\n          \"latitude\": \"latitude_value\",\n          \"longitude\": \"longitude_value\"\n        }\n      }\n    }\n  ],\n  \"ecosystem\": [\n    {\n      \"name\": \"ecosystem_name\",\n      \"properties\": {\n        \"bounded_by\": [\"list_of_locations\"],\n        \"type\": \"aquatic/terrestrial\"\n      }\n    }\n  ],\n  \"habitat\": [\n    {\n      \"name\": \"habitat_name\",\n      \"properties\": {\n        \"type\": \"aquatic/terrestrial\",\n        \"subcomponent_of\": \"ecosystem_name\"\n      }\n    }\n  ],\n  \"relationships\": [\n    {\n      \"related_entities\": [\"entity1\", \"entity2\", \"...\"],\n      \"relationship_properties\": {\n        \"name\": \"relationship_name\",\n        \"type\": \"biotic/abiotic\",\n        \"directionality\": \"unidirectional/bidirectional\",\n        \"context\": \"relationship_contextual_description\"\n      }\n    }\n  ]\n}\n```"
        }
      ]
    }
  ],
  response_format={
    "type": "text"
  },
  temperature=1,
  max_tokens=2048,
  top_p=1,
  frequency_penalty=0,
  presence_penalty=0
)